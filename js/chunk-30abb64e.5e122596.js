(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-30abb64e"],{"07cc":function(t,e,n){"use strict";var r=n("24c9"),a=n.n(r);a.a},"24c9":function(t,e,n){},2532:function(t,e,n){"use strict";var r=n("23e7"),a=n("5a34"),s=n("1d80"),u=n("ab13");r({target:"String",proto:!0,forced:!u("includes")},{includes:function(t){return!!~String(s(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"359b":function(t,e,n){"use strict";var r=n("e21a"),a=n.n(r);a.a},"403d":function(t,e,n){"use strict";var r=n("85f4"),a=n.n(r);a.a},"44e7":function(t,e,n){var r=n("861d"),a=n("c6b6"),s=n("b622"),u=s("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[u])?!!e:"RegExp"==a(t))}},"5a34":function(t,e,n){var r=n("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},"60c8":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("99af"),n("4160"),n("159b");var r=n("5530"),a=(n("96cf"),n("1da1")),s=n("d4ec"),u=n("bee2"),o=n("6ad1"),i=function(){function t(){Object(s["a"])(this,t)}return Object(u["a"])(t,null,[{key:"create",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].post("workspace/".concat(e,"/quiz-groups/"),{});case 2:return n=t.sent,t.abrupt("return",n.data.quizGroup);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"remove",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].delete("workspace/".concat(e,"/quiz-groups/").concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n,a){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=Object(r["a"])({},a),t.next=3,o["a"].post("workspace/".concat(e,"/quiz-groups/").concat(n),JSON.stringify(s));case 3:case"end":return t.stop()}}),t)})));function e(e,n,r){return t.apply(this,arguments)}return e}()},{key:"getQuizGroup",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].get("workspace/".concat(e,"/quiz-groups/").concat(n));case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"getQuizGroups",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].get("workspace/".concat(e,"/quiz-groups/"));case 2:return n=t.sent,t.abrupt("return",n.data.quizGroupList);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateName",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n,r,a){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={name:a},e.next=3,t.update(n,r,s);case 3:case"end":return e.stop()}}),e)})));function n(t,n,r){return e.apply(this,arguments)}return n}()},{key:"prepareQuizIdList",value:function(t){var e=[];return t.forEach((function(t){e.push(t.uuid)})),e}},{key:"setQuizList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n,r,a){var s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=this.prepareQuizIdList(a),u={quizIdList:s},e.next=4,t.update(n,r,u);case 4:case"end":return e.stop()}}),e,this)})));function n(t,n,r){return e.apply(this,arguments)}return n}()},{key:"test",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["a"].post("quiz/test",{});case 2:return e=t.sent,console.log(e.data),t.abrupt("return",e.data);case 5:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()}]),t}()},"749c":function(t,e,n){"use strict";var r;n.d(e,"a",(function(){return r})),function(t){t[t["QUIZ_EDITOR"]="QUIZ_EDITOR"]="QUIZ_EDITOR",t[t["MEMBER_EDITOR"]="MEMBER_EDITOR"]="MEMBER_EDITOR",t[t["EVENT_EDITOR"]="EVENT_EDITOR"]="EVENT_EDITOR",t[t["MANAGER"]="MANAGER"]="MANAGER",t[t["ADMIN"]="ADMIN"]="ADMIN"}(r||(r={}))},"85f4":function(t,e,n){},"9d8d":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar"},[n("div",{staticClass:"navbar-brand"},[n("router-link",{attrs:{to:t.homepageRoute}},[n("i",{staticClass:"far fa-comment fa-flip-horizontal"}),t._v(" 互動貼圖 ")])],1),"QuizGroupMaker"===t.$route.name?n("QuizGroupNameInput",{staticClass:"group-name"}):t._e(),n("div",{staticClass:"nav"},[t._l(t.links,(function(e,r){return n("div",{key:r,staticClass:"nav-btn-wrapper"},[n("router-link",{staticClass:"nav-btn",attrs:{to:{name:e.name}}},[t._v(" "+t._s(e.value)+" ")])],1)})),"Login"!==t.$route.name?n("b-dropdown",{attrs:{id:"account-dropdown",right:"",variant:"outline-dark"},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("i",{staticClass:"fa fa-user-circle"})]},proxy:!0}],null,!1,716711830)},[n("b-dropdown-item",[t._v(" 目前登入為 "),n("br"),n("strong",[t._v(t._s(t.username))])]),n("b-dropdown-divider"),n("b-dropdown-item",{on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v(" 登出 ")])],1):t._e()],2)],1)},a=[],s=(n("b0c0"),n("2b0e")),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"center"},[n("div",{staticClass:"label"},[t._v(" 題組名稱： ")]),n("input",{attrs:{type:"text",name:"","data-toggle":"tooltip","data-placement":"top",title:"重新命名",maxlength:"20"},domProps:{value:t.quizGroupName},on:{input:t.updateQuizGroupName,blur:t.changeGroupName}})])},o=[],i=n("5530"),c=n("60c8"),p=n("2f62"),l=s["default"].extend({computed:Object(i["a"])({},Object(p["b"])({quizGroupName:function(t){return t.currentQuizGroup.name}})),methods:{updateQuizGroupName:function(t){var e;this.$store.commit("updateQuizGroupName",null===(e=t.target)||void 0===e?void 0:e.value)},changeGroupName:function(){var t=this.$store.state.currentQuizGroup,e=t.uuid,n=t.name;c["a"].updateName(this.$store.state.currentWorkspace.uuid,e,n)}}}),d=l,f=(n("359b"),n("2877")),v=Object(f["a"])(d,u,o,!1,null,"4702b675",null),m=v.exports,h=s["default"].extend({components:{QuizGroupNameInput:m},props:{links:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{username:function(){return this.$store.state.username},homepageRoute:function(){return"Login"!==this.$route.name?this.$store.state.homepageRoute:(this.$route.name,"/")}},methods:{logout:function(){this.$cookies.isKey("token")&&(this.$cookies.remove("token"),this.$router.push("/login"))}}}),g=h,b=(n("07cc"),Object(f["a"])(g,r,a,!1,null,"b7597b42",null));e["a"]=b.exports},a55b:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("navbar"),n("div",{staticClass:"container mt-5",staticStyle:{"max-width":"440px"}},[n("h3",[t._v("登入")]),n("div",{staticClass:"space-holder"},[""!==t.loginMessage?n("p",{staticClass:"login-message"},[t._v(" "+t._s(t.loginMessage)+" ")]):t._e()]),n("form",{staticClass:"mt-4"},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"account"}},[t._v("帳號")]),!1===t.hasAccount?n("div",{staticClass:"empty-input mb-1"},[t._v(" 請填寫這個欄位 ")]):t._e(),n("div",{staticClass:"input-block"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.account,expression:"account"}],staticClass:"form-control",attrs:{id:"account",type:"text",name:"account",placeholder:"您的帳號"},domProps:{value:t.account},on:{input:function(e){e.target.composing||(t.account=e.target.value)}}})])]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"control-label",attrs:{for:"password"}},[t._v("密碼")]),!1===t.hasPassword?n("div",{staticClass:"empty-input mb-1"},[t._v(" 請填寫這個欄位 ")]):t._e(),n("div",{staticClass:"input-block"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{id:"password",type:"password",name:"password",placeholder:"您的密碼"},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginButton(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}})])])]),n("div",{staticClass:"login-btn"},[n("button",{staticClass:"btn btn-success btn-large",on:{click:t.loginButton}},[t._v(" 登入 ")])])])],1)},a=[],s=(n("caad"),n("2532"),n("96cf"),n("1da1")),u=n("2b0e"),o=n("d4ec"),i=n("bee2"),c=n("6ad1"),p=function(){function t(){Object(o["a"])(this,t)}return Object(i["a"])(t,null,[{key:"login",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={identifier:e,password:n},t.next=3,c["a"].post("account/login",r);case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}(),l=n("749c"),d=n("9d8d"),f=u["default"].extend({components:{navbar:d["a"]},data:function(){return{account:"",hasAccount:!0,password:"",hasPassword:!0,loginMessage:""}},methods:{reset:function(){this.account="",this.password=""},loginButton:function(){""!==this.account&&""!==this.password?(this.hasPassword=!0,this.hasAccount=!0,this.handleLogin()):(""===this.account?this.hasAccount=!1:this.hasAccount=!0,""===this.password?this.hasPassword=!1:this.hasPassword=!0)},handleLogin:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.login(t.account,t.password);case 3:n=e.sent,r=n.profile,a=n.auth,t.$cookies.set("token",a.token),s="/user",(r.roles.includes(l["a"].ADMIN)||r.roles.includes(l["a"].MANAGER))&&(s="/manager/workspace"),r.roles.includes(l["a"].QUIZ_EDITOR)&&(s="/manager/workspace/quizgroups"),r.roles.includes(l["a"].MEMBER_EDITOR)&&(s="/manager/workspace/membergroups"),r.roles.includes(l["a"].EVENT_EDITOR)&&(s="/manager/workspace/quizevents"),t.$store.commit("saveProfile",r),t.$store.commit("setHomepage",s),t.$router.push(s),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](0),e.t0&&e.t0.response&&401===e.t0.response.status?(t.loginMessage="登入失敗，錯誤的帳號或密碼",t.reset(),setTimeout((function(){t.loginMessage=""}),3e3)):console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()}}}),v=f,m=(n("403d"),n("2877")),h=Object(m["a"])(v,r,a,!1,null,"0944baaf",null);e["default"]=h.exports},ab13:function(t,e,n){var r=n("b622"),a=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,"/./"[t](e)}catch(r){}}return!1}},caad:function(t,e,n){"use strict";var r=n("23e7"),a=n("4d64").includes,s=n("44d2"),u=n("ae40"),o=u("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!o},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s("includes")},e21a:function(t,e,n){}}]);
//# sourceMappingURL=chunk-30abb64e.5e122596.js.map