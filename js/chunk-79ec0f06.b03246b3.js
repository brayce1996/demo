(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79ec0f06"],{"021b":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r("99af"),r("b0c0");var n=r("5530"),a=(r("96cf"),r("1da1")),o=r("d4ec"),i=r("bee2"),u=r("6ad1"),c=r("f52b"),s=function(){function e(){Object(o["a"])(this,e)}return Object(i["a"])(e,null,[{key:"create",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={name:r},e.next=3,u["a"].post("workspace/".concat(t,"/member-groups"),JSON.stringify(n));case 3:return a=e.sent,e.abrupt("return",a.data.memberGroup);case 5:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getMemberGroup",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,i,s,l,m,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].get("workspace/".concat(t,"/member-groups/").concat(r));case 2:for(n=e.sent,a=n.data.memberGroup.members,o=0;o<a.length;o+=1)i=a[o],s=i.uuid,l=i.name,m=i.phone,d=i.confirmed,a[o]=new c["a"](s,l,m,d);return e.abrupt("return",n.data.memberGroup);case 6:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getMemberGroups",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].get("workspace/".concat(t,"/member-groups"));case 2:return r=e.sent,e.abrupt("return",r.data.memberGroups);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"update",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){var o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=Object(n["a"])({},a),e.next=3,u["a"].put("workspace/".concat(t,"/member-groups/").concat(r),o);case 3:return i=e.sent,e.abrupt("return",i.data.memberGroup);case 5:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"deleteMemberGroup",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].delete("workspace/".concat(t,"/member-groups/").concat(r));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"deleteMemberInMemberGroup",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].delete("workspace/".concat(t,"/member-groups/").concat(r,"/members/").concat(n));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"updateMemberInMemberGroup",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a,o){var i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Object(n["a"])({},o),e.next=3,u["a"].put("workspace/".concat(t,"/member-groups/").concat(r,"/members/").concat(a),i);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));function t(t,r,n,a){return e.apply(this,arguments)}return t}()}]),e}()},"10c2":function(e,t,r){},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"14c3":function(e,t,r){var n=r("c6b6"),a=r("9263");e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var o=r.call(e,t);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},2268:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"memberGroup-maker"},[r("div",{staticClass:"container"},[r("div",{staticClass:"info"},[r("div",{staticClass:"memberGroup-name"},[r("label",{attrs:{for:"class_name"}},[e._v("班級名稱："+e._s(e.memberGroupName))]),r("button",{staticClass:"btn edit-btn",on:{click:function(t){return t.preventDefault(),e.$modal.show("update-member-group-name-modal")}}},[e._v(" 修改名稱 ")])]),r("div",{staticClass:"length"},[r("label",{attrs:{for:"class_length"}},[e._v("學生人數：")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.members.length,expression:"members.length"}],attrs:{id:"class_length",type:"text",disabled:""},domProps:{value:e.members.length},on:{input:function(t){t.target.composing||e.$set(e.members,"length",t.target.value)}}})])]),r("table",{staticClass:"table table-sm"},[e._m(0),e._l(e.members,(function(t,n){return r("tr",{key:n,staticClass:"data",attrs:{"table-hover":""}},[r("td",[e._v(" "+e._s(n+1)+" ")]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"member.name"}],class:{"bg-gray":!0===t.openEdit},attrs:{type:"text",disabled:!t.openEdit},domProps:{value:t.name},on:{input:function(r){r.target.composing||e.$set(t,"name",r.target.value)}}})]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"member.phone"}],class:{"bg-gray":!0===t.openEdit},attrs:{type:"text",disabled:!t.openEdit},domProps:{value:t.phone},on:{input:function(r){r.target.composing||e.$set(t,"phone",r.target.value)}}})]),r("td",{attrs:{width:"50"}},[!1===t.confirmed?r("button",{staticClass:"btn to-be-confirmed-td",on:{click:function(t){return e.toggleConfirmed(n)}}},[e._v(" 待確認 ")]):e._e(),!0===t.confirmed?r("button",{staticClass:"btn confirmed-td",on:{click:function(t){return e.toggleConfirmed(n)}}},[e._v(" 已確認 ")]):e._e()]),r("td",[r("button",{staticClass:"btn no-bg-btn",on:{click:function(t){return e.openRemoveModal(n)}}},[r("i",{staticClass:"fas fa-trash-alt"})])])])}))],2),r("v-dialog")],1),r("UpdateMemberGroupNameModal")],1)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",{attrs:{width:"100"}},[e._v(" 序號 ")]),r("th",{attrs:{width:"100"}},[e._v(" 學生姓名 ")]),r("th",{attrs:{width:"100"}},[e._v(" 綁定帳號(電話) ")]),r("th",{attrs:{width:"50"}},[e._v(" 確認身分 ")]),r("th",{attrs:{width:"50"}},[e._v(" 刪除 ")])])}],o=(r("a434"),r("96cf"),r("1da1")),i=r("2b0e"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("modal",{attrs:{name:e.modalName,transition:"pop-out",width:e.modalWidth,"focus-trap":!0,height:224},on:{"before-open":e.beforeOpen}},[r("div",{staticClass:"box"},[r("div",{staticClass:"partition"},[r("div",{staticClass:"partition-title"},[e._v(" 修改班級名稱 ")]),r("div",{staticClass:"partition-form"},[r("form",{attrs:{autocomplete:"false"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.memberGroupName,expression:"memberGroupName"}],attrs:{id:"memberGroup-name",type:"text",placeholder:"班級名稱"},domProps:{value:e.memberGroupName},on:{input:function(t){t.target.composing||(e.memberGroupName=t.target.value)}}})]),r("p",{staticClass:"remind"},[e._v(" "+e._s(e.remind)+" ")]),r("div",{staticClass:"button-set"},[r("button",{attrs:{id:"cencel-btn"},on:{click:e.handleCancel}},[e._v(" 取消 ")]),r("button",{attrs:{id:"create-btn"},on:{click:e.handleSubmit}},[e._v(" 送出 ")])])])])])])},c=[],s=(r("b0c0"),r("ac1f"),r("841c"),r("021b")),l=r("f52b"),m=656,d=i["default"].extend({data:function(){return{modalName:"update-member-group-name-modal",modalWidth:m,memberGroupName:"",remind:""}},computed:{currentWorkspace:function(){return this.$store.state.currentWorkspace},currentMemberGroup:function(){return this.$store.state.currentMemberGroup}},created:function(){this.modalWidth=window.innerWidth<m?m/2:m},methods:{beforeOpen:function(){this.memberGroupName=this.currentMemberGroup.name,this.remind=""},handleCancel:function(){console.log("取消創建班級"),this.$modal.hide(this.modalName)},handleSubmit:function(){var e=this,t=/^[^\s_!¡?÷?¿/\\+=@#$%ˆ&*(){}|~<>;:[\]]{2,}$/g;if(console.log(this.memberGroupName.search(t)),0===this.memberGroupName.search(t)){this.remind="";var r=new l["b"](this.memberGroupName);s["a"].update(this.currentWorkspace.uuid,this.currentMemberGroup.uuid,r).then((function(t){e.$modal.hide(e.modalName),e.$store.commit("changeMemberGroup",t)}))}else this.remind="不允許任何空白、特殊符號，且至少要兩個字以上"}}}),p=d,f=(r("62f0"),r("999f"),r("2877")),b=Object(f["a"])(p,u,c,!1,null,null,null),h=b.exports,v=i["default"].extend({components:{UpdateMemberGroupNameModal:h},data:function(){return{members:[]}},computed:{workspaceId:function(){return this.$store.state.currentWorkspace.uuid},memberGroupId:function(){return this.$store.state.currentMemberGroup.uuid},memberGroupName:function(){return this.$store.state.currentMemberGroup.uniqueName}},mounted:function(){this.loadMemberGroup(this.workspaceId,this.memberGroupId)},methods:{loadMemberGroup:function(e,t){var r=this;s["a"].getMemberGroup(e,t).then((function(e){r.members=e.members}))},editStudent:function(e){var t=this.members[e];t.openEdit=!0},saveEdit:function(e){var t=this.members[e];t.openEdit=!1},toggleConfirmed:function(e){var t=this.members[e],r=new l["c"](!t.confirmed);s["a"].updateMemberInMemberGroup(this.workspaceId,this.memberGroupId,t.uuid,r).then((function(){t.confirmed=!t.confirmed}))},openRemoveModal:function(e){var t=this;this.$modal.show("dialog",{title:"確定刪除嗎?",text:"這個學生資料刪掉就不會再回來了",buttons:[{title:"取消",handler:function(){t.$modal.hide("dialog")}},{title:"確定",handler:function(){t.$modal.hide("dialog"),t.$emit("deleteStudent"),t.deleteStudent(e)}}]})},deleteStudent:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:console.log("刪除學生資料"),e>=0&&e<t.members.length&&s["a"].deleteMemberInMemberGroup(t.workspaceId,t.memberGroupId,t.members[e].uuid).then((function(){t.members.splice(e,1)}));case 2:case"end":return r.stop()}}),r)})))()}}}),g=v,x=(r("97f4"),r("fe74"),Object(f["a"])(g,n,a,!1,null,"9ed8855c",null));t["default"]=x.exports},"32ae":function(e,t,r){},"62f0":function(e,t,r){"use strict";var n=r("eeca"),a=r.n(n);a.a},"841c":function(e,t,r){"use strict";var n=r("d784"),a=r("825a"),o=r("1d80"),i=r("129f"),u=r("14c3");n("search",1,(function(e,t,r){return[function(t){var r=o(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var o=a(e),c=String(this),s=o.lastIndex;i(s,0)||(o.lastIndex=0);var l=u(o,c);return i(o.lastIndex,s)||(o.lastIndex=s),null===l?-1:l.index}]}))},9263:function(e,t,r){"use strict";var n=r("ad6d"),a=r("9f7f"),o=RegExp.prototype.exec,i=String.prototype.replace,u=o,c=function(){var e=/a/,t=/b*/g;return o.call(e,"a"),o.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),s=a.UNSUPPORTED_Y||a.BROKEN_CARET,l=void 0!==/()??/.exec("")[1],m=c||l||s;m&&(u=function(e){var t,r,a,u,m=this,d=s&&m.sticky,p=n.call(m),f=m.source,b=0,h=e;return d&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),h=String(e).slice(m.lastIndex),m.lastIndex>0&&(!m.multiline||m.multiline&&"\n"!==e[m.lastIndex-1])&&(f="(?: "+f+")",h=" "+h,b++),r=new RegExp("^(?:"+f+")",p)),l&&(r=new RegExp("^"+f+"$(?!\\s)",p)),c&&(t=m.lastIndex),a=o.call(d?r:m,h),d?a?(a.input=a.input.slice(b),a[0]=a[0].slice(b),a.index=m.lastIndex,m.lastIndex+=a[0].length):m.lastIndex=0:c&&a&&(m.lastIndex=m.global?a.index+a[0].length:t),l&&a&&a.length>1&&i.call(a[0],r,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(a[u]=void 0)})),a}),e.exports=u},"97f4":function(e,t,r){"use strict";var n=r("d084"),a=r.n(n);a.a},"999f":function(e,t,r){"use strict";var n=r("32ae"),a=r.n(n);a.a},"9f7f":function(e,t,r){"use strict";var n=r("d039");function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},a434:function(e,t,r){"use strict";var n=r("23e7"),a=r("23cb"),o=r("a691"),i=r("50c4"),u=r("7b0b"),c=r("65f0"),s=r("8418"),l=r("1dde"),m=r("ae40"),d=l("splice"),p=m("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,b=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d||!p},{splice:function(e,t){var r,n,l,m,d,p,g=u(this),x=i(g.length),w=a(e,x),E=arguments.length;if(0===E?r=n=0:1===E?(r=0,n=x-w):(r=E-2,n=b(f(o(t),0),x-w)),x+r-n>h)throw TypeError(v);for(l=c(g,n),m=0;m<n;m++)d=w+m,d in g&&s(l,m,g[d]);if(l.length=n,r<n){for(m=w;m<x-n;m++)d=m+n,p=m+r,d in g?g[p]=g[d]:delete g[p];for(m=x;m>x-n+r;m--)delete g[m-1]}else if(r>n)for(m=x-n;m>w;m--)d=m+n-1,p=m+r-1,d in g?g[p]=g[d]:delete g[p];for(m=0;m<r;m++)g[m+w]=arguments[m+2];return g.length=x-n+r,l}})},ac1f:function(e,t,r){"use strict";var n=r("23e7"),a=r("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(e,t,r){"use strict";var n=r("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},d084:function(e,t,r){},d784:function(e,t,r){"use strict";r("ac1f");var n=r("6eeb"),a=r("d039"),o=r("b622"),i=r("9263"),u=r("9112"),c=o("species"),s=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),m=o("replace"),d=function(){return!!/./[m]&&""===/./[m]("a","$0")}(),p=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));e.exports=function(e,t,r,m){var f=o(e),b=!a((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),h=b&&!a((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[c]=function(){return r},r.flags="",r[f]=/./[f]),r.exec=function(){return t=!0,null},r[f](""),!t}));if(!b||!h||"replace"===e&&(!s||!l||d)||"split"===e&&!p){var v=/./[f],g=r(f,""[e],(function(e,t,r,n,a){return t.exec===i?b&&!a?{done:!0,value:v.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),x=g[0],w=g[1];n(String.prototype,e,x),n(RegExp.prototype,f,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}m&&u(RegExp.prototype[f],"sham",!0)}},eeca:function(e,t,r){},f52b:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return i}));r("b0c0");var n=r("d4ec"),a=function e(t,r,a,o){Object(n["a"])(this,e),this.openEdit=!1,this.uuid=t,this.name=r,this.phone=a,this.confirmed=o},o=function e(t){Object(n["a"])(this,e),this.confirmed=t},i=function e(t){Object(n["a"])(this,e),this.name=t}},fe74:function(e,t,r){"use strict";var n=r("10c2"),a=r.n(n);a.a}}]);
//# sourceMappingURL=chunk-79ec0f06.b03246b3.js.map